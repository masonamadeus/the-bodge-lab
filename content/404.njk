---
permalink: 404.html
layout: layout.njk
title: "Page Not Found (404)"
eleventyExcludeFromCollections: true
directory: false
download: false
---

<h2>Oops! Page Not Found (404)</h2>
<p>I couldn't find the page you were looking for. </p>
    
    <p>This is The <em>Bodge</em> Lab, so things get moved around!</p>
<p>Based on the URL you tried, were you looking for one of these?</p>

<div id="smart-search-results">
    <p><i>Searching for matches...</i></p>
</div>

<hr>
<p>Or, you can try heading back to the <a href="/">homepage</a>.</p>


<script>
  // 1. Listen for the 'bodgelab:searchready' event from main.js
  document.addEventListener('bodgelab:searchready', () => {
    
    // 2. Get the data and elements (using your existing data dump)
    const allPages = {{ filetree.allPages | dump | safe }};
    const resultsContainer = document.getElementById('smart-search-results');
    
    // 3. Get the query from the bad URL
    const badPath = window.location.pathname.toLowerCase();
    
    // 4. Run the search
    const results = window.BodgeLab.runSearch(badPath, allPages);

    // --- THIS IS THE NEW LOGIC ---
    // 5. Check if there is exactly one result
    if (results.length === 1) {
      // It's a single, high-confidence match. Redirect!
      const redirectUrl = results[0].url;
      resultsContainer.innerHTML = `<p><i>One match found! Redirecting you to: <a href="${redirectUrl}">${redirectUrl}</a>...</i></p>`;
      window.location.href = redirectUrl;
    } else {
      // 6. Otherwise (0 or 2+ results), just render the list as normal
      window.BodgeLab.renderResults(results, resultsContainer, badPath);
    }
    // --- END NEW LOGIC ---
  });
</script>