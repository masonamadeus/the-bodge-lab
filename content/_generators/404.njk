---
permalink: 404.html
layout: layout.njk
title: "Page Not Found (404)"
eleventyExcludeFromCollections: true
directory: false
download: false
---

<h2>Oops! Page Not Found (404)</h2>
<p>I couldn't find the page you were looking for. </p>
    
    <p>This is The <em>Bodge</em> Lab, so things get moved around!</p>
<p>Based on the URL you tried, were you looking for one of these?</p>
<div>
    <p>Keywords: "<i id="search-keywords"></i>"</p>
</div>
<div id="smart-search-results">
    <p><i>Searching for matches...</i></p>
</div>

<hr>
<p>Or, you can try heading back to the <a href="/">homepage</a>.</p>


<script>
  // 1. Listen for the 'bodgelab:searchready' event
  document.addEventListener('bodgelab:searchready', async () => {
    
    // 2. Get the data and elements
    const resultsContainer = document.getElementById('smart-search-results');
    const keywordsContainer = document.getElementById('search-keywords')
    
    // 3. Fetch the search data (or get from cache)
    resultsContainer.innerHTML = '<p><i>Loading search data...</i></p>';
    const allPages = await window.BodgeLab.getSearchData();
 
    // 4. Get the query from the bad URL
    const badPath = window.location.pathname.toLowerCase();
    const keywords = badPath.replace(/[\/\-]/g, ' ')          // Treat slashes and hyphens as spaces
    .replace(/[^a-z0-9\s]/g, '')   // Remove all other punctuation (which is now just spaces)
    .split(/\s+/)                  
    .filter(k => k.length > 0 && k !== 'index');

    keywordsContainer.innerHTML = keywords;
    
    // 5. Run the search
    const results = window.BodgeLab.runSearch(badPath, allPages);

    // 6. Check for single result and redirect
    if (results.length === 1) {
      const redirectUrl = results[0].url;
      resultsContainer.innerHTML = `<p><i>One match found! Redirecting you to: <a href="${redirectUrl}">${redirectUrl}</a>...</i></p>`;
      window.location.href = redirectUrl;
    } else {
      // 7. Render list
      window.BodgeLab.renderResults(results, resultsContainer, badPath);
    }
  });
</script>