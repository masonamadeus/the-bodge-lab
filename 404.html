<!DOCTYPE html>
<html lang="en">
    <head>
        
        <script>
            (function () {
                const STORAGE_KEY = 'bodge-id-v1';
                const SIZE = 5;
                // 1. Try to load existing identity
                let identity = null;
                try {
                    identity = JSON.parse(localStorage.getItem(STORAGE_KEY));
                } catch (e) {}
                // 2. If no identity, GENESIS MODE (Random Generation)
                if (! identity) {
                    const hue = Math.floor(Math.random() * 360);
                    const grid = new Array(SIZE * SIZE).fill(null);
                    // Generate Mirrored Pattern
                    for (let x = 0; x < Math.ceil(SIZE / 2); x++) {
                        for (let y = 0; y < SIZE; y++) {
                            if (Math.random() > 0.5) {
                                const alpha = (Math.random() * 0.6 + 0.4).toFixed(2);
                                // We store: { o: opacity, c: customColor (optional) }
                                const pixel = {
                                    o: alpha
                                };
                                // Set Left
                                grid[y * SIZE + x] = pixel;
                                // Set Mirror
                                if (x < Math.floor(SIZE / 2)) {
                                    grid[y * SIZE + (SIZE - 1 - x)] = pixel;
                                }
                            }
                        }
                    }
                    identity = {
                        hue,
                        grid
                    };
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(identity));
                }
                // 3. Render SVG Define Theme Colors based on the stored Hue
                const cLight = `hsl(${
                    identity.hue
                }, 80%, 40%)`;
                const cDark = `hsl(${
                    identity.hue
                }, 80%, 70%)`;
                let rects = '';
                identity.grid.forEach((pixel, i) => {
                    if (!pixel) 
                        return;
                    
                    const x = i % SIZE;
                    const y = Math.floor(i / SIZE);
                    // If pixel has a custom color, use it. Otherwise use CSS var. We use a CSS class 'themable' to let the style block
                    // handle standard pixels
                    const fillAttr = pixel.c
                        ? `fill="${
                        pixel.c
                    }"` : `class="themable"`;
                    rects += `<rect x="${x}" y="${y}" width="1" height="1" opacity="${
                        pixel.o
                    }" ${fillAttr} />`;
                });
                const svg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${SIZE} ${SIZE}" shape-rendering="crispEdges">
            <style>
                .themable { fill: ${cLight}; }
                @media (prefers-color-scheme: dark) {
                    .themable { fill: ${cDark}; } 
                }
                /* Custom text color checks */
                text { fill: black; font-weight: 900; pointer-events: none; }
                @media (prefers-color-scheme: dark) { text { fill: white; } }
            </style>
            ${rects}
            <text x="2.5" y="3.5" text-anchor="middle" font-family="monospace" font-size="3px"></text>
            </svg>`;
                const link = document.createElement('link');
                link.rel = 'icon';
                link.id = 'dynamic-favicon'; // ID for easier updates later
                link.href = 'data:image/svg+xml,' + encodeURIComponent(svg);
                document.head.appendChild(link);
                // Expose for the editor to use
                window.BodgeIdentity = {
                    data: identity,
                    save: (newData) => {
                        localStorage.setItem(STORAGE_KEY, JSON.stringify(newData));
                    }
                };
            })();
        </script>
        <link rel="stylesheet" href="/css/main.css">
        <script src="/js/theme.js"></script>
        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <meta charset="UTF-8">
        <title>Page Not Found (404)</title>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="generator" content="Eleventy v3.1.2">
        <meta name="description" content="A curious folder on the internet. Home of Mason Amadeus">
        <link
        rel="canonical" href="https://bodgelab.com/404.html"> 
        <meta property="og:site_name" content="The Bodge Lab">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://bodgelab.com/404.html">
        <meta property="og:title" content="Page Not Found (404)">
        <meta
        property="og:description" content="A curious folder on the internet. Home of Mason Amadeus"> 
        <meta property="og:image" content="https://bodgelab.com/.config/ogimg.jpg">
        <meta
        name="twitter:image" content="https://bodgelab.com/.config/ogimg.jpg">
        
        
            
            <meta name="twitter:card" content="summary_large_image">
        
    </head>
    <body>
        <svg id="paperfilter">
            <defs>
                <filter id="paperlike" x="-20%" y="-20%" width="140%" height="140%" type="fractalNoise">
                    <feTurbulence basefrequency="0.0005" numoctaves="1" result="noise"/>
                    <feDisplacementMap in="SourceGraphic" in2="noise" scale="1" xchannelselector="R" ychannelselector="R"></filter>
                </defs>
            </svg>
            <header class="sticky">
                <nav class="nav-container">
                    <div class="breadcrumb-nav">
                        <div class="breadcrumb-mover">
                            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Theme">
                                <svg
                                    viewbox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="theme-icon">
                                    <path id="sun-icon" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                    <g id="moon-icon">
                                        <path d="M12 2a7 7 0 0 0-7 7c0 2.32 1.04 4.39 2.66 5.82a2 2 0 0 1 .68 1.48V19a2 2 0 0 0 2 2h3.32a2 2 0 0 0 2-2v-2.7a2 2 0 0 1
                                            .68-1.48C17.96 13.39 19 11.32 19 9a7 7 0 0 0-7-7Z"></path>
                                        <path d="M9 21h6"></path>
                                        <path d="M9 17h6"></path>
                                    </g>
                                </svg>
                            </button>
                            <span class="separator">\\</span>
                            <a href="/" class="breadcrumb" title="Home Directory">BodgeLab</a>
                            
                            
                            
                                
                            
                                
                                    
                                    <span class="separator">\</span>
                                    
                                        <span class="current">Page Not Found (404)</span>
                                    
                                
                            
                        </div>
                    </div>
                    <div
                        class="page-nav">
                        
                        
                            <div>
                                <a href="/" class="nav-link up">â‡± Go Up</a>
                            </div>
                        
                        
                        
                            <div class="page-meta-date">
                                <i>
                                    <em>Modified: February 28, 2026</em>
                                </i>
                            </div>
                        
                    </div>
                </nav>
            </header>
            
                <main class="main-content">
                    
                        
<h1>Trying to find that page...</h1>

<p>This is The <em>Bodge</em> Lab, so things get moved around!</p>

<h3>Based on the URL you tried, were you looking for one of these?</h3>

<div id="smart-search-results">
  <p><i>Initializing...</i></p>
</div>

<div>
  <p>Keywords: "<i id="search-keywords"></i>"</p>
</div>

<hr>
<p>Or, you can try heading back to the <a href="/">homepage</a>.</p>

<script>
  // Unified 404 Logic: Shortlinks FIRST, then Search
  document.addEventListener('bodgelab:searchready', async () => {
    
    // --- Helpers ---
    function decodeSearchString(str) {
      if (!str) return '';
      try {
        str = decodeURIComponent(str);
      } catch (e) {}
      const textarea = document.createElement('textarea');
      textarea.innerHTML = str;
      return textarea.value;
    }

    const resultsContainer = document.getElementById('smart-search-results');
    const keywordsContainer = document.getElementById('search-keywords');
    const path = window.location.pathname;

    // --- Shortlink Check ---
    // If the URL starts with /s/, we try to resolve it first.
    if (path.startsWith('/s/')) {
      const uid = path.replace('/s/', '').replace(/\/$/, '');
      
      resultsContainer.innerHTML = '<p><i>Checking shortlinks...</i></p>';
      keywordsContainer.textContent = `Shortlink ID: ${uid}`;

      try {
        const response = await fetch('/shortlinks.json');
        if (response.ok) {
          const links = await response.json();
          if (links[uid]) {
              // SUCCESS: Redirect
              resultsContainer.innerHTML = `<p><i>Shortlink found! Redirecting...</i></p>`;
              
              // CAPTURE EXISTING QUERY PARAMS
              const currentQuery = window.location.search; 
              const destination = links[uid] + currentQuery;
              
              window.location.replace(destination);
              return; 
          }
        }
      } catch (e) {
        console.error("Shortlink lookup failed", e);
      }
      
      // If we are here, the shortlink failed.
      // We let the code fall through to the Search Logic, 
      // but we interpret the UID as the search term.
    }

    // --- STEP 2: Smart-ish Search Logic ---
    // We process the path to make it a readable search query
    const query = decodeSearchString(path)
        .replace(/^\/s\//, '') // Remove leading /s/ if it was a failed shortlink
        .replace(/[\/\-]/g, ' ') // Turn slashes/dashes to spaces
        .toLowerCase() // Prevent capital letters from getting cut off
        .replace(/[^a-z0-9\s]/g, ' ') // NOW this is safe (everything is lowercase)
        .trim();

    keywordsContainer.textContent = query;
    resultsContainer.innerHTML = '<p><i>Searching...</i></p>';

    // 1. Get Results
    const results = await window.BodgeLab.getResults(query);

    // 2. Smart Redirect (High Confidence Match)
    if (results.length === 1 && results[0].score > 5) { 
      const match = results[0];
      resultsContainer.innerHTML = `<p><i>Found a perfect match! Redirecting to: <a href="${match.url}">${match.title}</a></i></p>`;
      window.location.replace(match.url);
    } else {
      // 3. Render List
      window.BodgeLab.render(results, resultsContainer, query);
    }
  });
</script>
                    
                    
                    
                    
                    <div id="dir-sentinel" style="display: block; width: 100%; visibility: hidden; pointer-events: none;"></div>
                </main>
            
            
            
        <script src="/js/main.js"></script>
    </body>
</body></html>